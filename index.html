<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hide and Seek MiddelsfÃ¤hr</title>
<style>
body { font-family: Arial, sans-serif; background: #0f172a; color: white; text-align: center; padding: 20px; }
.container { max-width: 600px; margin: auto; }
input, button { width: 100%; padding: 10px; margin: 8px 0; border-radius: 8px; border: none; }
button { background: #22c55e; font-weight: bold; cursor: pointer; }
.member { background: #1e293b; padding: 10px; margin: 5px 0; border-radius: 8px; }
.hidden { display: none; }
.warning { color: red; }
a { color: #38bdf8; text-decoration: none; }
</style>
</head>
<body>

<div class="container">
<h1>Hide and Seek MiddelsfÃ¤hr</h1>

<div id="codeBox">
Â Â Â Â <input type="password" id="accessCode" placeholder="Zugangscode eingeben">
Â Â Â Â <button onclick="checkCode()">Zugang prÃ¼fen</button>
</div>

<div id="formBox" class="hidden">
<h2>Anmeldung</h2>
<input type="text" id="firstname" placeholder="Vorname">
<input type="text" id="lastname" placeholder="Nachname">
<input type="number" id="age" placeholder="Alter">
<input type="text" id="class" placeholder="Klasse">

<h3>Nimmt mit:</h3>
<label><input type="checkbox" value="Taschenlampe"> Taschenlampe</label><br>
<label><input type="checkbox" value="Kompass"> Kompass</label><br>
<label><input type="checkbox" value="Fahrzeuge"> Fahrrad/Inliner/Rollschuhe/Skateboard/Hoverboard/Roller/Kettcar</label><br>
<label><input type="checkbox" value="Karte von MiddelsfÃ¤hr"> Karte von MiddelsfÃ¤hr</label>

<p class="warning">!!! ANDERE SACHEN SIND NICHT ERLAUBT !!!</p>

<label><input type="checkbox" id="agbCheck"> Ich habe die <a href="#" onclick="showAGB()">AGBâ€˜s</a> gelesen</label><br>
<label><input type="checkbox" id="rulesCheck"> Ich bin mit den <a href="#" onclick="showRules()">Spielregeln</a> einverstanden</label><br><br>
<button onclick="register()">Anmelden</button>
</div>

<h2>Teilnehmer (<span id="count">0</span>)</h2>
<input type="text" id="search" placeholder="Nach Namen suchen">
<div id="members"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

// ðŸ”¥ Deine Firebase Config
const firebaseConfig = {
Â Â Â Â apiKey: "AIzaSyA5dYM02tcTl7uDvX1WgyWqpihCWvfeIHs",
Â Â Â Â authDomain: "hide-and-seek-d8104.firebaseapp.com",
Â Â Â Â databaseURL: "https://hide-and-seek-d8104-default-rtdb.firebaseio.com",
Â Â Â Â projectId: "hide-and-seek-d8104",
Â Â Â Â storageBucket: "hide-and-seek-d8104.firebasestorage.app",
Â Â Â Â messagingSenderId: "967191587097",
Â Â Â Â appId: "1:967191587097:web:19765825deb306ab2dbd88"
};

const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const ACCESS_CODE = "HideAndSeekMiddelsfÃ¤hr_26419";

// Zugangscode prÃ¼fen
window.checkCode = function() {
Â Â Â Â const code = document.getElementById("accessCode").value;
Â Â Â Â if(code === ACCESS_CODE){
Â Â Â Â Â Â Â Â document.getElementById("codeBox").style.display = "none";
Â Â Â Â Â Â Â Â document.getElementById("formBox").classList.remove("hidden");
Â Â Â Â } else { alert("Falscher Code!"); }
}

// Anmeldung
window.register = function() {
Â Â Â Â if(!document.getElementById("agbCheck").checked || !document.getElementById("rulesCheck").checked){
Â Â Â Â Â Â Â Â alert("Bitte AGB und Regeln akzeptieren!");
Â Â Â Â Â Â Â Â return;
Â Â Â Â }

Â Â Â Â const firstname = document.getElementById("firstname").value.trim();
Â Â Â Â const lastname = document.getElementById("lastname").value.trim();
Â Â Â Â const age = document.getElementById("age").value.trim();
Â Â Â Â const className = document.getElementById("class").value.trim();

Â Â Â Â if(!firstname || !lastname || !age || !className){
Â Â Â Â Â Â Â Â alert("Bitte alle Felder ausfÃ¼llen!");
Â Â Â Â Â Â Â Â return;
Â Â Â Â }

Â Â Â Â // Nur Items aus "Nimmt mit"-Checkboxen
Â Â Â Â const checkedBoxes = document.querySelectorAll('#formBox input[type="checkbox"]:not(#agbCheck):not(#rulesCheck):checked');
Â Â Â Â let items = [];
Â Â Â Â checkedBoxes.forEach(cb => { if(cb.value) items.push(cb.value); });

Â Â Â Â push(ref(database, "participants"), { firstname, lastname, age, class: className, items })
Â Â Â Â .then(() => { alert("Erfolgreich angemeldet!"); })
Â Â Â Â .catch(err => { console.error(err); alert("Fehler beim Speichern!"); });
}

// Teilnehmer live anzeigen
onValue(ref(database, "participants"), snapshot => {
Â Â Â Â const membersDiv = document.getElementById("members");
Â Â Â Â membersDiv.innerHTML = "";
Â Â Â Â let count = 0;
Â Â Â Â snapshot.forEach(child => {
Â Â Â Â Â Â Â Â const data = child.val();
Â Â Â Â Â Â Â Â count++;
Â Â Â Â Â Â Â Â const div = document.createElement("div");
Â Â Â Â Â Â Â Â div.className = "member";
Â Â Â Â Â Â Â Â div.innerText = `${data.firstname} ${data.lastname} | Klasse: ${data.class}`;
Â Â Â Â Â Â Â Â membersDiv.appendChild(div);
Â Â Â Â });
Â Â Â Â document.getElementById("count").innerText = count;
});

// Suchleiste
document.getElementById("search").addEventListener("input", function() {
Â Â Â Â const filter = this.value.toLowerCase();
Â Â Â Â document.querySelectorAll(".member").forEach(member => {
Â Â Â Â Â Â Â Â member.style.display = member.innerText.toLowerCase().includes(filter) ? "block" : "none";
Â Â Â Â });
});

// AGB & Regeln
window.showAGB = function(){ alert(`FÃ¼r Diebstahl oder Verletzungen Ã¼bernehmen wir keine Haftung.
Betreten privater GrundstÃ¼cke strengstens verboten.
WÃ¤hrend des Spiels nur nach Abmeldung bei Tomte / Oscar Lachmund (oslamu@mail.de)`); }

window.showRules = function(){ alert(`2 Teams (Sucher & Verstecker), jeweils 2 Klassen.
Kleine Teams 1-4 Personen bleiben zusammen.
Teams tauschen, wenn alle gefunden sind.
FlÃ¤che MiddelsfÃ¤hr nicht verlassen.
Fragen: lamacos.youtube@web.de`); }
</script>

</body>
</html>
